{% extends "layout.html" %} {% block title %} Log In {% endblock %} {% block main %}


<!-- CARDS CARDS &********************&%*%^$%%$%$%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- CARDS CARDS &********************&%*%^$%%$%$%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- CARDS CARDS &********************&%*%^$%%$%$%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- CARDS CARDS &********************&%*%^$%%$%$%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- CARDS CARDS &********************&%*%^$%%$%$%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<div class="jumbotron jumbotron-fluid" style="background: rgba(0,0,0,0.5);color:aliceblue">
    <div class="container">
        <h1 class="display-4">Personal Spendings</h1>
        <p class="lead">All personal Spendings are displayed here</p>
    </div>
</div>
<div class="card-group">
    <div class="card text-white bg-dark mb-3" style="max-width: 18rem; margin: 10px;">
        <div class="card-header">Wallet</div>
        <div class="card-body">
            <i class="fas fa-wallet" style="font-size: xx-large;"></i>
            <span><h5 class="card-title">{{cash}}</h5></span>
        </div>
    </div>

    <div class="card text-white bg-success mb-3" style="max-width: 18rem; margin: 10px;">
        <div class="card-header">This Month</div>
        <div class="card-body">
            <i class="far fa-address-book" style="font-size: xx-large;"></i>
            <span><h5 class="card-title">{{grand_ptotal}}</h5></span>
        </div>
    </div>

    <div class="card  bg-warning mb-3" style="max-width: 18rem; margin: 10px;">
        <div class="card-header">Money in Stocks</div>
        <div class="card-body">
            <i class="fas fa-briefcase" style="font-size: xx-large;"></i>
            <span><h5 class="card-title">{{stockmoney}}</h5></span>
        </div>
    </div>

    <div class="card text-white bg-primary mb-3" style="max-width: 18rem; margin: 10px;">
        <div class="card-header">This Year till now</div>
        <div class="card-body">
            <i class="far fa-calendar-alt" style="font-size: xx-large;"></i>
            <span><h5 class="card-title">{{total_spending}}</h5></span>
        </div>
    </div>



</div>
</div>

<!-- CARDS CARDS &********************&%*%^$%%$%$%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- CARDS CARDS &********************&%*%^$%%$%$%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- CARDS CARDS &********************&%*%^$%%$%$%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- CARDS CARDS &********************&%*%^$%%$%$%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- CARDS CARDS &********************&%*%^$%%$%$%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->








<!-- Main chart and ADD Panel $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
<!-- Main chart and ADD Panel $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
<script>
    startTime();

    var dayNames = ["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"];

    var newDate = new Date();

    var DateString = '';
    for (var i = 0; i < 7; i++) {
        if (i == newDate.getDay()) {
            DateString += "<span class='clock__date--curr'>" + dayNames[i] + "</span> ";
        } else {
            DateString += "<span>" + dayNames[i] + "</span> ";
        }
    }
    $('.clock__date').html(DateString);

    function startTime() {
        var today = new Date();
        var h = checkTime(today.getHours());
        var m = checkTime(today.getMinutes());
        var s = checkTime(today.getSeconds());

        var TimeString = h + ':' + m + ':' + s;
        TimeString = '<span>' + TimeString.split('').join('</span><span>') + '</span>';
        $('.clock__time').html(TimeString);

        var t = setTimeout(function() {
            startTime()
        }, 1000);
    }

    function checkTime(i) {
        if (i < 10) {
            i = '0' + i
        };
        return i;
    }

    $('.clock-toogle').click(function() {
        $('body').toggleClass('dark');
    });
</script>
<!-- Main chart and ADD Panel $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
<!-- Main chart and ADD Panel $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
<div class="card-group">
    <div class="card wrapper" style="max-width: 40rem; ">
        <div class="card-body">
            <div class="clock-wrap container">
                <div class="clock">
                    <div class="clock__date">
                    </div>
                    <div class="clock__time ">
                    </div>
                </div>
                <h4 class="display-4">Time is Valuable!</h1>
            </div>
        </div>
    </div>



    <div class="card text-white bg-secondary text-center container" style="max-width: 80vw">
        <div class="card-header">Add Purchase!</div>
        <div class="card-body container">
            <form action="/personal" method="post">
                <div class="form-group">
                    <input autocomplete="off" autofocus class="form-control" name="commodity" placeholder="commodity" type="text">
                </div>
                <div class="form-group">
                    <input class="form-control" name="amount" placeholder="amount" type="number">
                </div>
                <button class="btn btn-primary" type="pspend">Spend!</button>
            </form>
        </div>
    </div>
</div>

</div>

<!-- Main chart and ADD Panel $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
<!-- Main chart and ADD Panel $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
<!-- Main chart and ADD Panel $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
<!-- Main chart and ADD Panel $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->










<!-- THIS MONTH$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
<!-- THIS MONTH$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
<!-- THIS MONTH$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
<!-- THIS MONTH$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
<!-- THIS MONTH$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
<!-- THIS MONTH$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
<!-- THIS MONTH$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
<h1 class="display-1">This Month</h1>


<main class="container-fluid">
    <table class="table table-striped table-hover ">
        <thead class="thead-dark">
            <tr>
                <th scope="col">Spending</th>
                <th scope="col">Amount</th>
                <th scope="col">Date</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for pspending in pspendings: %}
            <tr>
                <td>{{pspending["commodity"]}}</td>
                <td>{{pspending["amount"]}}</td>
                <td>{{pspending["time"]}}</td>
                <td>
                    <a href="/personal/delete/{{pspending['pid']}}" class="btn btn-dark btn-large ">Delete</a>
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="{{pspending['commodity']}}" data-link="/personal/update/{{pspending['pid']}}">update</button>
                </td>
            </tr>
            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">New message</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                        </div>
                        <div class="modal-body">
                            <form class="formaction" method="POST">
                                <div class="form-group">
                                    <label for="recipient-name" class="col-form-label">commodity:</label>
                                    <input type="text" class="form-control" name="update_commodity" id="recipient-name">
                                </div>
                                <div class="form-group">
                                    <label for="message-text" class="col-form-label">amount:</label>
                                    <input class="form-control" type="number" name="update_amount" id="message-text"></input>
                                </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="submit" class="btn btn-primary ">Update</button>
                        </div>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}


        </tbody>


    </table>

    <!-- THIS MONTH$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$  END   $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
    <!-- THIS MONTH$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$        $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
    <!-- THIS MONTH$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$        $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
    <!-- THIS MONTH$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$        $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
    <!-- THIS MONTH$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$        $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
    <!-- THIS MONTH$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$        $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->







    <!-- other months++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <!-- other months++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <!-- other months++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <!-- other months++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <!-- other months++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <!-- other months++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <!-- other months++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

    <h1 class="display-1 " style="border-style: none">Payment History till date</h1>


    <table class="table table-striped table-hover">
        <thead class="thead-dark">
            <tr>
                <th scope="col">Spending</th>
                <th scope="col">Amount</th>
                <th scope="col">Date</th>
                <th scope="col">Category</th>
            </tr>
        </thead>
        <tbody>
            {% for hpspending in hpspendings: %}
            <tr>
                <td>{{hpspending["paymentpurpose"]}}</td>
                <td>{{hpspending["amount"]}}</td>
                <td>{{hpspending["datestamp"]}}</td>
                <td>{{hpspending["category"]}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>


    <!--  END END other month +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++= -->
    <!--  END END other month +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++= -->
    <!--  END END other month +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++= -->
    <!--  END END other month +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++= -->
    <!--  END END other month +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++= -->
    <!--  END END other month +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++= -->



    <script>
        $('#exampleModal').on('show.bs.modal', function(event) {
            var button = $(event.relatedTarget) // Button that triggered the modal
            var recipient = button.data('whatever')
            var link = button.data('link')
                // Extract info from data-* attributes
                // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
                // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
            var modal = $(this)
            modal.find('.modal-title').text('New message to ' + recipient)
            modal.find('.modal-body input').val(recipient)
            modal.find('.formaction').attr("action", link)
        })
    </script>
</main>
{% endblock %}